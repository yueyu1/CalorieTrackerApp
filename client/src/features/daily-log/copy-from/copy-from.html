<button
  mat-stroked-button
  type="button"
  class="copy-from-btn"
  (click)="$event.stopPropagation()"
  [matMenuTriggerFor]="menu"
  [disabled]="isCopying()"
>
  @if(!isCopying()) {
    Copy from
    <mat-icon class="copy-from-icon" fontIcon="expand_more"></mat-icon>
  }

  @else {
    <mat-progress-spinner
      diameter="18"
      mode="indeterminate"
      class="btn-spinner">
    </mat-progress-spinner>
    <span class="loading-text">Copying…</span>
  }
  
</button>

<mat-menu #menu="matMenu" class="copy-menu">
  <!-- Quick picks -->
  @for (pick of quickPicks; track $index) {
    <button
      mat-menu-item
      class="menu-item"
      (click)="requestCopy(pick.sourceMealId)"
      [disabled]="pick.disabled"
      type="button"
    >
      <span class="menu-title">{{ pick.label }}</span>
    </button>
  }

  <mat-divider></mat-divider>

  <!-- Choose date -->
  <button mat-menu-item class="menu-item choose-date" (click)="openChooseDate()" type="button">
    <span class="menu-title">Choose date…</span>
  </button>
</mat-menu>
